<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nadaum - ì˜¨ë³´ë”©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            user-select: none;
            cursor: default;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Progress Bar */
        .progress-container {
            padding: 20px 20px 10px;
        }

        .progress-bar {
            height: 4px;
            background-color: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
        }

        .step-container {
            display: none;
            flex-direction: column;
            flex: 1;
        }

        .step-container.active {
            display: flex;
        }

        .step-icon {
            font-size: 80px;
            text-align: center;
            margin-bottom: 24px;
        }

        .step-title {
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 12px;
            line-height: 1.4;
            user-select: none;
            cursor: default;
        }

        .step-description {
            font-size: 15px;
            color: #666;
            text-align: center;
            line-height: 1.6;
            margin-bottom: 40px;
            user-select: none;
            cursor: default;
        }

        .optional-badge {
            display: inline-block;
            padding: 4px 12px;
            background-color: #f0f0f0;
            color: #666;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }

        /* Category Selection */
        .category-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .category-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background-color: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-card:hover {
            border-color: #667eea;
        }

        .category-card.selected {
            border-color: #667eea;
            background-color: #f8f9ff;
        }

        .category-icon {
            font-size: 48px;
        }

        .category-info {
            flex: 1;
        }

        .category-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .category-desc {
            font-size: 13px;
            color: #666;
        }

        .check-mark {
            font-size: 24px;
            color: #667eea;
            display: none;
        }

        .category-card.selected .check-mark {
            display: block;
        }

        /* Level Selection */
        .level-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .level-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background-color: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .level-card:hover {
            border-color: #667eea;
        }

        .level-card.selected {
            border-color: #667eea;
            background-color: #f8f9ff;
        }

        .level-icon {
            font-size: 48px;
        }

        .level-info {
            flex: 1;
        }

        .level-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .level-desc {
            font-size: 13px;
            color: #666;
        }

        /* Avatar Selection */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .avatar-option {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            border: 3px solid #e0e0e0;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            background-color: white;
        }

        .avatar-option:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .avatar-option.selected {
            border-color: #667eea;
            background-color: #f8f9ff;
            transform: scale(1.1);
        }

        /* Buttons */
        .button-container {
            margin-top: auto;
            padding-top: 24px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-bottom: 12px;
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background-color: #f8f9ff;
        }

        .skip-btn {
            width: 100%;
            padding: 12px;
            background: none;
            border: none;
            color: #999;
            font-size: 14px;
            cursor: pointer;
            margin-top: 8px;
        }

        /* Notification Toggle */
        .notification-card {
            padding: 24px;
            background-color: #f8f9ff;
            border-radius: 16px;
            margin-bottom: 24px;
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .notification-title {
            font-size: 18px;
            font-weight: 700;
        }

        .toggle-switch {
            width: 50px;
            height: 28px;
            background-color: #ccc;
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .toggle-switch.active {
            background-color: #667eea;
        }

        .toggle-slider {
            width: 24px;
            height: 24px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(22px);
        }

        .notification-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        /* Welcome/Complete Screen */
        .welcome-content {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            flex: 1;
            user-select: none;
            cursor: default;
        }

        .welcome-icon {
            font-size: 120px;
            margin-bottom: 24px;
            user-select: none;
            cursor: default;
        }

        /* Routine Recommendation */
        .routine-recommendation {
            background-color: #f8f9ff;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .recommendation-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 12px;
            color: #667eea;
        }

        .recommendation-text {
            font-size: 15px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 20px;
        }

        .routine-suggestion-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .routine-suggestion-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background-color: white;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .routine-suggestion-item:hover {
            border-color: #667eea;
        }

        .routine-suggestion-item.selected {
            border-color: #667eea;
            background-color: #f8f9ff;
        }

        .routine-suggestion-icon {
            font-size: 32px;
        }

        .routine-suggestion-info {
            flex: 1;
        }

        .routine-suggestion-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .routine-suggestion-desc {
            font-size: 12px;
            color: #999;
        }

        .routine-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 14px;
            color: white;
        }

        .routine-suggestion-item.selected .routine-checkbox {
            background-color: #667eea;
            border-color: #667eea;
        }

        /* Routine Recommendation Step (not counted in main steps) */
        .routine-recommendation-step {
            display: none;
            flex-direction: column;
            flex: 1;
        }

        .routine-recommendation-step.active {
            display: flex;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">1 / 6</div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Step 1: Welcome -->
            <div class="step-container active" data-step="1">
                <div class="welcome-content">
                    <div class="welcome-icon">ğŸ‘‹</div>
                    <div class="step-title">Nadaumì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•´ìš”!</div>
                    <div class="step-description">
                        ì…€í”„ì¼€ì–´ ë£¨í‹´ì„ ê´€ë¦¬í•˜ê³ <br>
                        ìƒˆë¡œìš´ ë‚˜ë¥¼ ì‹¤í—˜í•´ë³´ì„¸ìš”
                    </div>
                </div>
                <div class="button-container">
                    <button class="btn btn-primary" onclick="nextStep()">ì‹œì‘í•˜ê¸°</button>
                </div>
            </div>

            <!-- Step 2: Category Selection -->
            <div class="step-container" data-step="2">
                <div class="step-title">ê´€ì‹¬ìˆëŠ” ë¶„ì•¼ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                <div class="step-description">ì—¬ëŸ¬ ê°œë¥¼ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”</div>

                <div class="category-grid">
                    <div class="category-card" onclick="toggleSelection(this)" data-category="ìš´ë™">
                        <div class="category-icon">ğŸ’ª</div>
                        <div class="category-info">
                            <div class="category-title">ìš´ë™</div>
                            <div class="category-desc">ê·¼ë ¥, ì§€êµ¬ë ¥, ë°¸ëŸ°ìŠ¤</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>

                    <div class="category-card" onclick="toggleSelection(this)" data-category="ì˜ì–‘ì„­ì·¨">
                        <div class="category-icon">ğŸ¥—</div>
                        <div class="category-info">
                            <div class="category-title">ì˜ì–‘ì„­ì·¨</div>
                            <div class="category-desc">ì‹ë‹¨, ìˆ˜ë¶„, ì˜ì–‘ì œ</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>

                    <div class="category-card" onclick="toggleSelection(this)" data-category="ë°”ë””ì¼€ì–´">
                        <div class="category-icon">âœ¨</div>
                        <div class="category-info">
                            <div class="category-title">ë°”ë””ì¼€ì–´</div>
                            <div class="category-desc">í”¼ë¶€, ë„¤ì¼, í—¤ì–´</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>

                    <div class="category-card" onclick="toggleSelection(this)" data-category="íšŒë³µ/ì»¨ë””ì…”ë‹">
                        <div class="category-icon">ğŸ§˜</div>
                        <div class="category-info">
                            <div class="category-title">íšŒë³µ/ì»¨ë””ì…”ë‹</div>
                            <div class="category-desc">ìˆ˜ë©´, ìŠ¤íŠ¸ë ˆì¹­, íœ´ì‹</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>

                    <div class="category-card" onclick="toggleSelection(this)" data-category="ìŠµê´€ ê°œì„ ">
                        <div class="category-icon">ğŸš«</div>
                        <div class="category-info">
                            <div class="category-title">ìŠµê´€ ê°œì„ </div>
                            <div class="category-desc">ê¸ˆì—°, ë””ì§€í„¸ ë””í†¡ìŠ¤</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-primary" onclick="nextStep()">ë‹¤ìŒ</button>
                </div>
            </div>

            <!-- Step 3: Level Selection -->
            <div class="step-container" data-step="3">
                <div class="step-title">í˜„ì¬ ì…€í”„ì¼€ì–´ ìˆ˜ì¤€ì„ ì•Œë ¤ì£¼ì„¸ìš”</div>
                <div class="step-description">ë§ì¶¤í˜• ì¶”ì²œì„ ìœ„í•´ í•„ìš”í•´ìš”</div>

                <div class="level-grid">
                    <div class="level-card" onclick="selectSingle(this, '.level-card')" data-level="beginner">
                        <div class="level-icon">ğŸŒ±</div>
                        <div class="level-info">
                            <div class="level-title">ì´ˆì‹¬ì</div>
                            <div class="level-desc">ì´ì œ ë§‰ ì‹œì‘í•˜ëŠ” ë‹¨ê³„ì˜ˆìš”</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>

                    <div class="level-card" onclick="selectSingle(this, '.level-card')" data-level="intermediate">
                        <div class="level-icon">ğŸ”¥</div>
                        <div class="level-info">
                            <div class="level-title">ì¤‘ê¸‰ì</div>
                            <div class="level-desc">ì–´ëŠì •ë„ ë£¨í‹´ì„ ìœ ì§€í•˜ê³  ìˆì–´ìš”</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>

                    <div class="level-card" onclick="selectSingle(this, '.level-card')" data-level="advanced">
                        <div class="level-icon">â­</div>
                        <div class="level-info">
                            <div class="level-title">ê³ ê¸‰ì</div>
                            <div class="level-desc">ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ìˆì–´ìš”</div>
                        </div>
                        <div class="check-mark">âœ“</div>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-primary" onclick="startTour()">ë‹¤ìŒ</button>
                </div>
            </div>

            <!-- Routine Recommendation (íˆ¬ì–´ ì™„ë£Œ í›„, ìŠ¤í… ì¹´ìš´íŠ¸ì— í¬í•¨ ì•ˆë¨) -->
            <div class="routine-recommendation-step" id="routineRecommendationStep">
                <!-- This will be dynamically filled after tour -->
            </div>

            <!-- Step 4: Avatar Selection -->
            <div class="step-container" data-step="4">
                <div class="step-title">ë‚˜ë¥¼ ëŒ€í‘œí•  ì•„ë°”íƒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                <div class="step-description">
                    ì•„ë°”íƒ€ëŠ” ë£¨í‹´ ìˆ˜í–‰ì— ë”°ë¼ ì„±ì¥í•´ìš”
                </div>

                <div class="avatar-grid">
                    <div class="avatar-option" onclick="selectSingle(this, '.avatar-option')">ğŸ£</div>
                    <div class="avatar-option" onclick="selectSingle(this, '.avatar-option')">ğŸŒ±</div>
                    <div class="avatar-option" onclick="selectSingle(this, '.avatar-option')">â­</div>
                    <div class="avatar-option" onclick="selectSingle(this, '.avatar-option')">ğŸ”¥</div>
                    <div class="avatar-option" onclick="selectSingle(this, '.avatar-option')">ğŸ’</div>
                    <div class="avatar-option" onclick="selectSingle(this, '.avatar-option')">ğŸŒˆ</div>
                </div>

                <div class="button-container">
                    <button class="btn btn-primary" onclick="nextStep()">ë‹¤ìŒ</button>
                </div>
            </div>

            <!-- Step 5: Notifications -->
            <div class="step-container" data-step="5">
                <div class="step-title">
                    ì•Œë¦¼ ì„¤ì •
                    <span class="optional-badge">ì„ íƒ</span>
                </div>
                <div class="step-description">ë£¨í‹´ ì‹¤ì²œì„ ë„ì™€ë“œë¦´ê²Œìš”</div>

                <div class="notification-card">
                    <div class="notification-header">
                        <div class="notification-title">ë£¨í‹´ ì•Œë¦¼</div>
                        <div class="toggle-switch active" onclick="toggleSwitch(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="notification-desc">
                        ì„¤ì •í•œ ì‹œê°„ì— ë£¨í‹´ì„ ì•Œë ¤ë“œë ¤ìš”
                    </div>
                </div>

                <div class="notification-card">
                    <div class="notification-header">
                        <div class="notification-title">ì‹¤í—˜ ì§„í–‰ ì•Œë¦¼</div>
                        <div class="toggle-switch active" onclick="toggleSwitch(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="notification-desc">
                        ì‹¤í—˜ ì‹œì‘ê³¼ ì™„ë£Œë¥¼ ì•Œë ¤ë“œë ¤ìš”
                    </div>
                </div>

                <div class="notification-card">
                    <div class="notification-header">
                        <div class="notification-title">ì»¤ë®¤ë‹ˆí‹° ì•Œë¦¼</div>
                        <div class="toggle-switch" onclick="toggleSwitch(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="notification-desc">
                        ê²Œì‹œë¬¼ ê³µê°ê³¼ ëŒ“ê¸€ì„ ì•Œë ¤ë“œë ¤ìš”
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn btn-primary" onclick="nextStep()">ë‹¤ìŒ</button>
                    <button class="skip-btn" onclick="nextStep()">ê±´ë„ˆë›°ê¸°</button>
                </div>
            </div>

            <!-- Step 6: Complete -->
            <div class="step-container" data-step="6">
                <!-- This will be dynamically filled -->
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;
        let selectedCategories = [];
        let userLevel = 'beginner';
        let selectedAvatar = '';

        // Check if returning from tour
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('tour') === 'complete') {
            userLevel = urlParams.get('level') || 'beginner';
            selectedCategories = urlParams.get('categories')?.split(',').filter(c => c) || [];
            
            // íˆ¬ì–´ ì™„ë£Œ í›„ ë£¨í‹´ ì¶”ì²œ ë‹¨ê³„ í‘œì‹œ (ìŠ¤í… ì¹´ìš´íŠ¸ ìˆ¨ê¹€)
            document.querySelector('[data-step="1"]').classList.remove('active');
            document.getElementById('routineRecommendationStep').classList.add('active');
            document.querySelector('.progress-container').style.display = 'none'; // ì§„í–‰ë°” ìˆ¨ê¹€
            showRoutineRecommendation();
        } else if (urlParams.get('fromRoutine') === 'true') {
            // ë£¨í‹´ ë“±ë¡ ì™„ë£Œ í›„ ë³µê·€ - Step 4 (ì•„ë°”íƒ€)ë¡œ ì´ë™
            currentStep = 4;
            document.querySelector('[data-step="1"]').classList.remove('active');
            document.querySelector('[data-step="4"]').classList.add('active');
            document.querySelector('.progress-container').style.display = 'block'; // ì§„í–‰ë°” í‘œì‹œ
            updateProgress();
            
            userLevel = urlParams.get('level') || 'beginner';
            selectedCategories = urlParams.get('categories')?.split(',').filter(c => c) || [];
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = currentStep + ' / ' + totalSteps;
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
                currentStep++;
                document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
                updateProgress();
                
                // If reached step 6, show completion screen
                if (currentStep === 6) {
                    completeOnboarding();
                }
            }
        }

        function toggleSelection(element) {
            element.classList.toggle('selected');
            const category = element.dataset.category;
            if (element.classList.contains('selected')) {
                if (!selectedCategories.includes(category)) {
                    selectedCategories.push(category);
                }
            } else {
                selectedCategories = selectedCategories.filter(c => c !== category);
            }
        }

        function selectSingle(element, selector) {
            document.querySelectorAll(selector).forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            
            // Save level or avatar
            if (selector === '.level-card') {
                userLevel = element.dataset.level;
            } else if (selector === '.avatar-option') {
                selectedAvatar = element.textContent;
            }
        }

        function toggleSwitch(element) {
            element.classList.toggle('active');
        }

        function startTour() {
            // Start the tour by redirecting to feed page
            window.location.href = `feed.html?tour=true&level=${userLevel}&categories=${selectedCategories.join(',')}`;
        }

        function showRoutineRecommendation() {
            const step = document.getElementById('routineRecommendationStep');
            step.innerHTML = `
                <div class="routine-recommendation">
                    <div class="recommendation-title">ğŸ’¡ ì´ˆê¸° ë£¨í‹´ ì¶”ì²œ</div>
                    <div class="recommendation-text">
                        ë£¨í‹´ì„ ë§Œë“œëŠ” ê²Œ ìµìˆ™ì§€ ì•Šìœ¼ì‹ ê°€ìš”? ì €í¬ê°€ ì„ íƒí•˜ì‹  ì¹´í…Œê³ ë¦¬ì— ë§ëŠ” ì´ˆê¸° ë£¨í‹´ì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”!
                    </div>
                    
                    <div class="routine-suggestion-list" id="routineSuggestions">
                        <!-- Will be filled dynamically -->
                    </div>
                </div>
                
                <div class="button-container">
                    <button class="btn btn-primary" onclick="goToRoutineRegistration()">ë£¨í‹´ ì§ì ‘ ë“±ë¡í•´ë³´ê¸°</button>
                    <button class="skip-btn" onclick="skipRoutineRecommendation()">ë‚˜ì¤‘ì— í• ê²Œìš”</button>
                </div>
            `;

            // Generate routine suggestions based on selected categories
            const suggestions = generateRoutineSuggestions();
            const suggestionsContainer = document.getElementById('routineSuggestions');
            
            suggestions.forEach((routine, index) => {
                const item = document.createElement('div');
                item.className = 'routine-suggestion-item';
                item.onclick = () => toggleRoutineSelection(item);
                item.innerHTML = `
                    <div class="routine-suggestion-icon">${routine.icon}</div>
                    <div class="routine-suggestion-info">
                        <div class="routine-suggestion-title">${routine.title}</div>
                        <div class="routine-suggestion-desc">${routine.category} Â· ${routine.time}</div>
                    </div>
                    <div class="routine-checkbox"></div>
                `;
                suggestionsContainer.appendChild(item);
            });
        }

        function generateRoutineSuggestions() {
            const suggestions = [];
            const routinesByCategory = {
                'ìš´ë™': [
                    { icon: 'ğŸƒ', title: 'ì•„ì¹¨ ëŸ¬ë‹ 30ë¶„', category: 'ìš´ë™', time: '06:00 - 06:30' },
                    { icon: 'ğŸ’ª', title: 'ê·¼ë ¥ ìš´ë™ 20ë¶„', category: 'ìš´ë™', time: '18:00 - 18:20' }
                ],
                'ì˜ì–‘ì„­ì·¨': [
                    { icon: 'ğŸ¥—', title: 'ê±´ê°•í•œ ì•„ì¹¨ ì‹ì‚¬', category: 'ì˜ì–‘ì„­ì·¨', time: '07:30 - 08:00' },
                    { icon: 'ğŸ’§', title: 'ë¬¼ 2L ë§ˆì‹œê¸°', category: 'ì˜ì–‘ì„­ì·¨', time: 'í•˜ë£¨ì¢…ì¼' }
                ],
                'ë°”ë””ì¼€ì–´': [
                    { icon: 'âœ¨', title: 'ì €ë… ìŠ¤í‚¨ì¼€ì–´', category: 'ë°”ë””ì¼€ì–´', time: '22:00 - 22:10' },
                    { icon: 'ğŸ¦·', title: 'ì•„ì¹¨ êµ¬ê°• ê´€ë¦¬', category: 'ë°”ë””ì¼€ì–´', time: '07:00 - 07:05' }
                ],
                'íšŒë³µ/ì»¨ë””ì…”ë‹': [
                    { icon: 'ğŸ§˜', title: 'ì €ë… ìŠ¤íŠ¸ë ˆì¹­ 15ë¶„', category: 'íšŒë³µ/ì»¨ë””ì…”ë‹', time: '21:00 - 21:15' },
                    { icon: 'ğŸ˜´', title: 'ê·œì¹™ì ì¸ ìˆ˜ë©´', category: 'íšŒë³µ/ì»¨ë””ì…”ë‹', time: '23:00 ì·¨ì¹¨' }
                ],
                'ìŠµê´€ ê°œì„ ': [
                    { icon: 'ğŸ“µ', title: 'ë””ì§€í„¸ ë””í†¡ìŠ¤', category: 'ìŠµê´€ ê°œì„ ', time: '22:00 ì´í›„' },
                    { icon: 'â˜•', title: 'ì¹´í˜ì¸ ì¡°ì ˆ', category: 'ìŠµê´€ ê°œì„ ', time: '15:00 ì´í›„ ê¸ˆì§€' }
                ]
            };

            // ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì—ì„œ 2ê°œì”© ì¶”ì²œ
            if (selectedCategories.length > 0) {
                selectedCategories.forEach(category => {
                    if (routinesByCategory[category]) {
                        suggestions.push(...routinesByCategory[category]);
                    }
                });
            } else {
                // ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ ê¸°ë³¸ ì¶”ì²œ (ìš´ë™ 2ê°œ + íšŒë³µ/ì»¨ë””ì…”ë‹ 2ê°œ)
                suggestions.push(...routinesByCategory['ìš´ë™']);
                suggestions.push(...routinesByCategory['íšŒë³µ/ì»¨ë””ì…”ë‹']);
            }

            // ìµœëŒ€ 4ê°œê¹Œì§€ë§Œ ë°˜í™˜
            return suggestions.slice(0, 4);
        }

        function toggleRoutineSelection(element) {
            element.classList.toggle('selected');
            const checkbox = element.querySelector('.routine-checkbox');
            checkbox.textContent = element.classList.contains('selected') ? 'âœ“' : '';
        }

        function goToRoutineRegistration() {
            // ë£¨í‹´ ë“±ë¡ í™”ë©´ìœ¼ë¡œ ì´ë™ (ê°€ì´ë“œ íˆ¬ì–´ í¬í•¨)
            window.location.href = `routine.html?openModal=true&startGuide=true&level=${userLevel}&categories=${selectedCategories.join(',')}`;
        }

        function skipRoutineRecommendation() {
            // ë£¨í‹´ ì¶”ì²œ ê±´ë„ˆë›°ê³  ë°”ë¡œ Step 4 (ì•„ë°”íƒ€)ë¡œ ì´ë™
            document.getElementById('routineRecommendationStep').classList.remove('active');
            currentStep = 4;
            document.querySelector('[data-step="4"]').classList.add('active');
            document.querySelector('.progress-container').style.display = 'block'; // ì§„í–‰ë°” ë‹¤ì‹œ í‘œì‹œ
            updateProgress();
        }

        function completeOnboarding() {
            // Save onboarding data
            localStorage.setItem('onboardingComplete', 'true');
            localStorage.setItem('userLevel', userLevel);
            localStorage.setItem('selectedCategories', JSON.stringify(selectedCategories));
            localStorage.setItem('selectedAvatar', selectedAvatar);
            
            // Show completion screen
            const step6 = document.querySelector('[data-step="6"]');
            step6.innerHTML = `
                <div class="welcome-content">
                    <div class="welcome-icon">ğŸ‰</div>
                    <div class="step-title">ì¤€ë¹„ ì™„ë£Œ!</div>
                    <div class="step-description">
                        ì´ì œ Nadaumê³¼ í•¨ê»˜<br>
                        ê±´ê°•í•œ ë£¨í‹´ì„ ë§Œë“¤ì–´ê°€ìš”
                    </div>
                </div>
                <div class="button-container">
                    <button class="btn btn-primary" onclick="goToApp()">ì•± ì‹œì‘í•˜ê¸°</button>
                </div>
            `;
        }

        function goToApp() {
            window.location.href = 'feed.html';
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>