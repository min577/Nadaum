<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nadaum - ì±Œë¦°ì§€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .header-content {
            flex: 1;
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .icon-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: white;
        }

        /* Filters Section */
        .filters-section {
            background-color: white;
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .filters {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            margin-bottom: 12px;
            padding-bottom: 4px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .filters::-webkit-scrollbar {
            display: none;
        }

        .filter-chip {
            padding: 8px 16px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .filter-chip.active {
            background-color: #f5576c;
            color: white;
        }

        .sort-section {
            display: flex;
            gap: 8px;
        }

        .sort-btn {
            padding: 6px 12px;
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sort-btn.active {
            background-color: #333;
            color: white;
            border-color: #333;
        }

        /* Tab Section */
        .tab-section {
            display: flex;
            background-color: white;
            border-bottom: 1px solid #e0e0e0;
            position: sticky;
            top: 89px;
            z-index: 9;
        }

        .tab-btn {
            flex: 1;
            padding: 16px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: #999;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: #f5576c;
            border-bottom-color: #f5576c;
        }

        /* Experiment List */
        .experiment-list {
            padding: 20px;
            flex: 1;
        }

        .experiment-card {
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .experiment-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .experiment-card.completed {
            border-color: #4CAF50;
            background-color: #f1f8f4;
        }

        .experiment-card.hidden {
            display: none;
        }

        .experiment-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
        }

        .experiment-icon {
            font-size: 48px;
        }

        .experiment-info {
            flex: 1;
        }

        .experiment-category {
            display: inline-block;
            padding: 4px 10px;
            background-color: #fff3e0;
            color: #f57c00;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .experiment-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .experiment-duration {
            font-size: 13px;
            color: #999;
        }

        .success-badge {
            padding: 6px 12px;
            background-color: #4CAF50;
            color: white;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .experiment-description {
            font-size: 14px;
            line-height: 1.6;
            color: #666;
            margin-bottom: 16px;
        }

        .experiment-routines {
            margin-bottom: 16px;
        }

        .routines-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .routine-tag {
            display: inline-block;
            padding: 6px 12px;
            background-color: #f5f5f5;
            border-radius: 8px;
            font-size: 12px;
            margin-right: 6px;
            margin-bottom: 6px;
            color: #666;
        }

        .experiment-stats {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            padding: 12px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #666;
        }

        .experiment-btn {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .experiment-btn.primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .experiment-btn.secondary {
            background-color: white;
            color: #f5576c;
            border: 2px solid #f5576c;
        }

        .experiment-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* Onboarding Modal */
        .onboarding-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .onboarding-modal.active {
            display: flex;
        }

        .onboarding-content {
            background-color: white;
            width: 90%;
            max-width: 400px;
            border-radius: 20px;
            padding: 0;
            overflow: hidden;
        }

        .onboarding-header {
            padding: 16px 20px;
            border-bottom: 1px solid #e0e0e0;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 16px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            color: #999;
            cursor: pointer;
            line-height: 1;
        }

        .onboarding-progress {
            height: 4px;
            background-color: #f0f0f0;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .onboarding-progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            transition: width 0.3s;
        }

        .onboarding-step {
            padding: 40px 30px;
            text-align: center;
        }

        .onboarding-image {
            font-size: 80px;
            margin-bottom: 24px;
        }

        .onboarding-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #333;
        }

        .onboarding-description {
            font-size: 15px;
            line-height: 1.6;
            color: #666;
        }

        .onboarding-actions {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .onboarding-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 12px;
        }

        .onboarding-btn:hover {
            opacity: 0.9;
        }

        .onboarding-skip {
            width: 100%;
            padding: 12px;
            background: none;
            border: none;
            color: #999;
            font-size: 14px;
            cursor: pointer;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .empty-text {
            font-size: 16px;
            line-height: 1.5;
        }

        /* Bottom Navigation */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            background-color: white;
            border-top: 1px solid #e0e0e0;
            margin-top: auto;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-decoration: none;
            color: #999;
            font-size: 12px;
        }

        .nav-item.active {
            color: #333;
        }

        .nav-icon {
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="header-title">âš—ï¸ ì±Œë¦°ì§€</div>
                <div class="header-subtitle">ë˜ê³  ì‹¶ì€ ë‚˜ë¥¼ ì‹¤í—˜í•´ë³´ì„¸ìš”</div>
            </div>
        </div>

        <!-- Filters Section -->
        <div class="filters-section">
            <div class="filters">
                <button class="filter-chip active" onclick="filterCategory('all')">ì „ì²´</button>
                <button class="filter-chip" onclick="filterCategory('exercise')">ğŸƒ ìš´ë™</button>
                <button class="filter-chip" onclick="filterCategory('nutrition')">ğŸ¥— ì‹ë‹¨</button>
                <button class="filter-chip" onclick="filterCategory('body')">ğŸ’† ë°”ë””ì¼€ì–´</button>
                <button class="filter-chip" onclick="filterCategory('recovery')">ğŸ˜´ íšŒë³µ</button>
                <button class="filter-chip" onclick="filterCategory('habit')">âœ¨ ìŠµê´€</button>
            </div>
            <div class="sort-section">
                <button class="sort-btn active" onclick="sortBy('popular')">ì¸ê¸°ìˆœ</button>
                <button class="sort-btn" onclick="sortBy('completed')">ì™„ë£Œìœ¨ ë†’ì€ìˆœ</button>
            </div>
        </div>

        <!-- Tab Section -->
        <div class="tab-section">
            <button class="tab-btn active" onclick="switchTab(0)">ì¶”ì²œ ì‹¤í—˜</button>
            <button class="tab-btn" onclick="switchTab(1)">ì§„í–‰ì¤‘</button>
            <button class="tab-btn" onclick="switchTab(2)">ì™„ë£Œ</button>
        </div>

        <!-- Experiment List -->
        <div class="experiment-list" id="experimentList">
            <!-- Experiment Card 1 -->
            <div class="experiment-card" data-category="habit" data-popularity="2341" data-completion="68">
                <div class="experiment-header">
                    <div class="experiment-icon">ğŸŒ…</div>
                    <div class="experiment-info">
                        <span class="experiment-category">ìŠµê´€ ê°œì„ </span>
                        <div class="experiment-title">ì•„ì¹¨í˜• ì¸ê°„ìœ¼ë¡œ ì‚´ì•„ë³´ê¸°</div>
                        <div class="experiment-duration">ì¶”ì²œ ê¸°ê°„: 7ì¼</div>
                    </div>
                </div>
                
                <div class="experiment-description">
                    ì¼ì° ì¼ì–´ë‚˜ëŠ” ìŠµê´€ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”. ì•„ì¹¨ ì‹œê°„ì„ í™œìš©í•˜ë©´ í•˜ë£¨ê°€ ë” ìƒì‚°ì ìœ¼ë¡œ ë³€í•  ìˆ˜ ìˆì–´ìš”.
                </div>

                <div class="experiment-routines">
                    <div class="routines-title">í¬í•¨ëœ ë£¨í‹´ (5ê°œ)</div>
                    <span class="routine-tag">06:00 ê¸°ìƒ</span>
                    <span class="routine-tag">ì•„ì¹¨ ìŠ¤íŠ¸ë ˆì¹­</span>
                    <span class="routine-tag">ê±´ê°•í•œ ì•„ì¹¨ ì‹ì‚¬</span>
                    <span class="routine-tag">ì•„ì¹¨ ì‚°ì±…</span>
                    <span class="routine-tag">22:00 ì·¨ì¹¨</span>
                </div>

                <div class="experiment-stats">
                    <div class="stat-item">ğŸ‘¥ 2,341ëª… ë„ì „ì¤‘</div>
                    <div class="stat-item">âœ… 68% ì™„ë£Œìœ¨</div>
                </div>

                <button class="experiment-btn primary" onclick="startExperiment('ì•„ì¹¨í˜• ì¸ê°„', 'morning')">ì‹¤í—˜ ì‹œì‘í•˜ê¸°</button>
            </div>

            <!-- Experiment Card 2 -->
            <div class="experiment-card" data-category="nutrition" data-popularity="1892" data-completion="54">
                <div class="experiment-header">
                    <div class="experiment-icon">ğŸŒ±</div>
                    <div class="experiment-info">
                        <span class="experiment-category">ì˜ì–‘ì„­ì·¨</span>
                        <div class="experiment-title">ë¹„ê±´ìœ¼ë¡œ ì‚´ì•„ë³´ê¸°</div>
                        <div class="experiment-duration">ì¶”ì²œ ê¸°ê°„: 7ì¼</div>
                    </div>
                </div>
                
                <div class="experiment-description">
                    ì¼ì£¼ì¼ ë™ì•ˆ ì‹ë¬¼ì„± ì‹ë‹¨ë§Œìœ¼ë¡œ ìƒí™œí•´ë³´ì„¸ìš”. ê±´ê°•ê³¼ í™˜ê²½ì„ ìƒê°í•˜ëŠ” ë¼ì´í”„ìŠ¤íƒ€ì¼ì„ ê²½í—˜í•  ìˆ˜ ìˆì–´ìš”.
                </div>

                <div class="experiment-routines">
                    <div class="routines-title">í¬í•¨ëœ ë£¨í‹´ (4ê°œ)</div>
                    <span class="routine-tag">ì‹ë¬¼ì„± ì•„ì¹¨ ì‹ì‚¬</span>
                    <span class="routine-tag">ì‹ë¬¼ì„± ì ì‹¬ ì‹ì‚¬</span>
                    <span class="routine-tag">ì‹ë¬¼ì„± ì €ë… ì‹ì‚¬</span>
                    <span class="routine-tag">ì˜ì–‘ì œ ì„­ì·¨</span>
                </div>

                <div class="experiment-stats">
                    <div class="stat-item">ğŸ‘¥ 1,892ëª… ë„ì „ì¤‘</div>
                    <div class="stat-item">âœ… 54% ì™„ë£Œìœ¨</div>
                </div>

                <button class="experiment-btn primary" onclick="startExperiment('ë¹„ê±´', 'vegan')">ì‹¤í—˜ ì‹œì‘í•˜ê¸°</button>
            </div>

            <!-- Experiment Card 3 -->
            <div class="experiment-card" data-category="habit" data-popularity="3127" data-completion="72">
                <div class="experiment-header">
                    <div class="experiment-icon">ğŸ“µ</div>
                    <div class="experiment-info">
                        <span class="experiment-category">ìŠµê´€ ê°œì„ </span>
                        <div class="experiment-title">ë””ì§€í„¸ ë””í†¡ìŠ¤ ì‹¤ì²œí•˜ê¸°</div>
                        <div class="experiment-duration">ì¶”ì²œ ê¸°ê°„: 3ì¼</div>
                    </div>
                </div>
                
                <div class="experiment-description">
                    ì €ë… ì‹œê°„ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì„ ì¤„ì´ê³  ì•„ë‚ ë¡œê·¸ í™œë™ì„ ëŠ˜ë ¤ë³´ì„¸ìš”. ìˆ˜ë©´ì˜ ì§ˆì´ ê°œì„ ë˜ê³  ì§‘ì¤‘ë ¥ì´ ë†’ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”.
                </div>

                <div class="experiment-routines">
                    <div class="routines-title">í¬í•¨ëœ ë£¨í‹´ (3ê°œ)</div>
                    <span class="routine-tag">20:00 ì´í›„ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš© ì œí•œ</span>
                    <span class="routine-tag">ë…ì„œ 30ë¶„</span>
                    <span class="routine-tag">ì¼ê¸° ì“°ê¸°</span>
                </div>

                <div class="experiment-stats">
                    <div class="stat-item">ğŸ‘¥ 3,127ëª… ë„ì „ì¤‘</div>
                    <div class="stat-item">âœ… 72% ì™„ë£Œìœ¨</div>
                </div>

                <button class="experiment-btn primary" onclick="startExperiment('ë””ì§€í„¸ ë””í†¡ìŠ¤', 'digital-detox')">ì‹¤í—˜ ì‹œì‘í•˜ê¸°</button>
            </div>

            <!-- Experiment Card 4 -->
            <div class="experiment-card" data-category="exercise" data-popularity="4567" data-completion="61">
                <div class="experiment-header">
                    <div class="experiment-icon">ğŸ’ª</div>
                    <div class="experiment-info">
                        <span class="experiment-category">ìš´ë™</span>
                        <div class="experiment-title">ë§¤ì¼ ìš´ë™í•˜ëŠ” ì‚¬ëŒ ë˜ê¸°</div>
                        <div class="experiment-duration">ì¶”ì²œ ê¸°ê°„: 14ì¼</div>
                    </div>
                </div>
                
                <div class="experiment-description">
                    2ì£¼ ë™ì•ˆ ë§¤ì¼ ìµœì†Œ 30ë¶„ì˜ ìš´ë™ì„ ì‹¤ì²œí•´ë³´ì„¸ìš”. ê¾¸ì¤€í•œ ìš´ë™ì´ ìŠµê´€ìœ¼ë¡œ ìë¦¬ì¡ì„ ìˆ˜ ìˆì–´ìš”.
                </div>

                <div class="experiment-routines">
                    <div class="routines-title">í¬í•¨ëœ ë£¨í‹´ (3ê°œ)</div>
                    <span class="routine-tag">ì•„ì¹¨ ëŸ¬ë‹ 30ë¶„</span>
                    <span class="routine-tag">ê·¼ë ¥ ìš´ë™ 20ë¶„</span>
                    <span class="routine-tag">ì €ë… ìŠ¤íŠ¸ë ˆì¹­</span>
                </div>

                <div class="experiment-stats">
                    <div class="stat-item">ğŸ‘¥ 4,567ëª… ë„ì „ì¤‘</div>
                    <div class="stat-item">âœ… 61% ì™„ë£Œìœ¨</div>
                </div>

                <button class="experiment-btn primary" onclick="startExperiment('ë§¤ì¼ ìš´ë™', 'daily-exercise')">ì‹¤í—˜ ì‹œì‘í•˜ê¸°</button>
            </div>

            <!-- Experiment Card 5 -->
            <div class="experiment-card" data-category="recovery" data-popularity="2893" data-completion="75">
                <div class="experiment-header">
                    <div class="experiment-icon">ğŸ§˜</div>
                    <div class="experiment-info">
                        <span class="experiment-category">íšŒë³µ/ì»¨ë””ì…”ë‹</span>
                        <div class="experiment-title">ìˆ˜ë©´ ìµœì í™” í”„ë¡œì íŠ¸</div>
                        <div class="experiment-duration">ì¶”ì²œ ê¸°ê°„: 7ì¼</div>
                    </div>
                </div>
                
                <div class="experiment-description">
                    ê·œì¹™ì ì¸ ìˆ˜ë©´ íŒ¨í„´ì„ ë§Œë“¤ì–´ ìˆ˜ë©´ì˜ ì§ˆì„ ê°œì„ í•´ë³´ì„¸ìš”. í”¼ë¡œ íšŒë³µê³¼ ì»¨ë””ì…˜ ê´€ë¦¬ì— í° ë„ì›€ì´ ë©ë‹ˆë‹¤.
                </div>

                <div class="experiment-routines">
                    <div class="routines-title">í¬í•¨ëœ ë£¨í‹´ (5ê°œ)</div>
                    <span class="routine-tag">22:30 ì·¨ì¹¨ ì¤€ë¹„</span>
                    <span class="routine-tag">ëª…ìƒ 10ë¶„</span>
                    <span class="routine-tag">ìŠ¤ë§ˆíŠ¸í° ë„ê¸°</span>
                    <span class="routine-tag">07:00 ê¸°ìƒ</span>
                    <span class="routine-tag">ì•„ì¹¨ í–‡ë¹› ì¬ê¸°</span>
                </div>

                <div class="experiment-stats">
                    <div class="stat-item">ğŸ‘¥ 2,893ëª… ë„ì „ì¤‘</div>
                    <div class="stat-item">âœ… 75% ì™„ë£Œìœ¨</div>
                </div>

                <button class="experiment-btn primary" onclick="startExperiment('ìˆ˜ë©´ ìµœì í™”', 'sleep')">ì‹¤í—˜ ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>

        <!-- Onboarding Modal -->
        <div class="onboarding-modal" id="onboardingModal">
            <div class="onboarding-content">
                <div class="onboarding-header">
                    <button class="close-btn" onclick="closeOnboarding()">Ã—</button>
                    <div class="onboarding-progress">
                        <div class="onboarding-progress-fill" id="onboardingProgress" style="width: 33%"></div>
                    </div>
                </div>

                <div class="onboarding-step" id="onboardingStep">
                    <div class="onboarding-image">ğŸŒ…</div>
                    <h2 class="onboarding-title">ì•„ì¹¨í˜• ì¸ê°„ì˜ ì¥ì </h2>
                    <p class="onboarding-description">
                        ê·œì¹™ì ì¸ ê¸°ìƒ ì‹œê°„ì€ ìƒì²´ ë¦¬ë“¬ì„ ì•ˆì •ì‹œí‚¤ê³ , í•˜ë£¨ë¥¼ ë” ìƒì‚°ì ìœ¼ë¡œ ì‹œì‘í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤ë‹ˆë‹¤.
                    </p>
                </div>

                <div class="onboarding-actions">
                    <button class="onboarding-btn" onclick="nextOnboardingStep()">ë‹¤ìŒ</button>
                    <button class="onboarding-skip" onclick="skipOnboarding()">ê±´ë„ˆë›°ê¸°</button>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <a href="feed.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span>í™ˆ</span>
            </a>
            <a href="routine.html" class="nav-item">
                <span class="nav-icon">ğŸ“…</span>
                <span>ë£¨í‹´ê´€ë¦¬</span>
            </a>
            <a href="persona-lab.html" class="nav-item active">
                <span class="nav-icon">âš—ï¸</span>
                <span>ì‹¤í—˜ì‹¤</span>
            </a>
            <a href="my.html" class="nav-item">
                <span class="nav-icon">ğŸ‘¤</span>
                <span>ë§ˆì´</span>
            </a>
        </div>
    </div>

    <script>
        // ì‹¤í—˜ë³„ ì˜¨ë³´ë”© ë°ì´í„°
        const onboardingData = {
            'morning': [
                {
                    icon: 'ğŸŒ…',
                    title: 'ì•„ì¹¨í˜• ì¸ê°„ì˜ ì¥ì ',
                    description: 'ê·œì¹™ì ì¸ ê¸°ìƒ ì‹œê°„ì€ ìƒì²´ ë¦¬ë“¬ì„ ì•ˆì •ì‹œí‚¤ê³ , í•˜ë£¨ë¥¼ ë” ìƒì‚°ì ìœ¼ë¡œ ì‹œì‘í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ’ª',
                    title: 'ê±´ê°•í•œ ì‹ ì²´',
                    description: 'ì•„ì¹¨ ìš´ë™ì€ ì‹ ì§„ëŒ€ì‚¬ë¥¼ ì´‰ì§„í•˜ê³ , í•˜ë£¨ ì¢…ì¼ ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ§ ',
                    title: 'ë§‘ì€ ì •ì‹ ',
                    description: 'ì•„ì¹¨ ì‹œê°„ì€ ì§‘ì¤‘ë ¥ì´ ê°€ì¥ ë†’ì€ ì‹œê°„ëŒ€ì…ë‹ˆë‹¤. ì¤‘ìš”í•œ ì¼ì„ ì•„ì¹¨ì— ì²˜ë¦¬í•˜ë©´ íš¨ìœ¨ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤.'
                }
            ],
            'vegan': [
                {
                    icon: 'ğŸŒ±',
                    title: 'ê±´ê°•í•œ ì„ íƒ',
                    description: 'ì‹ë¬¼ì„± ì‹ë‹¨ì€ ì½œë ˆìŠ¤í…Œë¡¤ì„ ë‚®ì¶”ê³  ì‹¬í˜ˆê´€ ê±´ê°•ì„ ê°œì„ í•˜ëŠ”ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸŒ',
                    title: 'í™˜ê²½ ë³´í˜¸',
                    description: 'ë¹„ê±´ ì‹ë‹¨ì€ íƒ„ì†Œ ë°œìêµ­ì„ ì¤„ì´ê³  ì§€ì† ê°€ëŠ¥í•œ ë¯¸ë˜ë¥¼ ë§Œë“œëŠ”ë° ê¸°ì—¬í•©ë‹ˆë‹¤.'
                },
                {
                    icon: 'âœ¨',
                    title: 'ìƒˆë¡œìš´ ë°œê²¬',
                    description: 'ë‹¤ì–‘í•œ ì±„ì†Œì™€ ê³¼ì¼ì„ í†µí•´ ìƒˆë¡œìš´ ë§›ê³¼ ìš”ë¦¬ë²•ì„ ë°œê²¬í•  ìˆ˜ ìˆì–´ìš”.'
                }
            ],
            'digital-detox': [
                {
                    icon: 'ğŸ“µ',
                    title: 'ë””ì§€í„¸ ê³¼ë¶€í•˜ í•´ì†Œ',
                    description: 'ìŠ¤ë§ˆíŠ¸í° ê³¼ë‹¤ ì‚¬ìš©ì€ ìˆ˜ë©´ì˜ ì§ˆì„ ë–¨ì–´ëœ¨ë¦¬ê³  ì§‘ì¤‘ë ¥ì„ ì €í•˜ì‹œí‚µë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ˜´',
                    title: 'ìˆ˜ë©´ì˜ ì§ˆ ê°œì„ ',
                    description: 'ì €ë… ì‹œê°„ ë¸”ë£¨ë¼ì´íŠ¸ ì°¨ë‹¨ìœ¼ë¡œ ë©œë¼í† ë‹Œ ìƒì„±ì´ ì •ìƒí™”ë˜ì–´ ê¹Šì€ ìˆ˜ë©´ì„ ì·¨í•  ìˆ˜ ìˆì–´ìš”.'
                },
                {
                    icon: 'ğŸ§˜',
                    title: 'ë§ˆìŒì˜ í‰í™”',
                    description: 'ë””ì§€í„¸ ë””í†¡ìŠ¤ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì´ê³  í˜„ì¬ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤ë‹ˆë‹¤.'
                }
            ],
            'daily-exercise': [
                {
                    icon: 'ğŸ’ª',
                    title: 'ì²´ë ¥ í–¥ìƒ',
                    description: 'ë§¤ì¼ 30ë¶„ì˜ ìš´ë™ìœ¼ë¡œ ì‹¬íì§€êµ¬ë ¥ê³¼ ê·¼ë ¥ì´ ëˆˆì— ë„ê²Œ í–¥ìƒë©ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ˜Š',
                    title: 'ì •ì‹  ê±´ê°•',
                    description: 'ìš´ë™ì€ ì—”ë„ë¥´í•€ì„ ë¶„ë¹„ì‹œì¼œ ìš°ìš¸ê°ì„ ì¤„ì´ê³  ê¸°ë¶„ì„ ì¢‹ê²Œ ë§Œë“­ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸ¯',
                    title: 'ìŠµê´€ì˜ í˜',
                    description: '2ì£¼ë§Œ ê¾¸ì¤€íˆ í•˜ë©´ ìš´ë™ì´ ìì—°ìŠ¤ëŸ¬ìš´ ì¼ìƒì˜ ì¼ë¶€ê°€ ë©ë‹ˆë‹¤.'
                }
            ],
            'sleep': [
                {
                    icon: 'ğŸ§˜',
                    title: 'ê·œì¹™ì ì¸ ìˆ˜ë©´',
                    description: 'ì¼ì •í•œ ì‹œê°„ì— ìê³  ì¼ì–´ë‚˜ëŠ” ê²ƒì´ ìˆ˜ë©´ì˜ ì§ˆì„ ë†’ì´ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.'
                },
                {
                    icon: 'âš¡',
                    title: 'ì—ë„ˆì§€ íšŒë³µ',
                    description: 'ì§ˆ ì¢‹ì€ ìˆ˜ë©´ì€ ì‹ ì²´ì™€ ì •ì‹ ì„ íšŒë³µì‹œì¼œ ë‹¤ìŒ ë‚  í™œë ¥ì„ ë˜ì°¾ê²Œ í•©ë‹ˆë‹¤.'
                },
                {
                    icon: 'ğŸŒ™',
                    title: 'ê±´ê°•í•œ ìƒí™œ',
                    description: 'ì¶©ë¶„í•œ ìˆ˜ë©´ì€ ë©´ì—­ë ¥ ê°•í™”, ê¸°ì–µë ¥ í–¥ìƒ, ì²´ì¤‘ ì¡°ì ˆì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.'
                }
            ]
        };

        // ì‹¤í—˜ë³„ ë£¨í‹´ ë°ì´í„° ì •ì˜
        const experimentRoutines = {
            'morning': {
                name: 'ì•„ì¹¨í˜• ì¸ê°„ìœ¼ë¡œ ì‚´ì•„ë³´ê¸°',
                duration: 7,
                routines: [
                    { title: '06:00 ê¸°ìƒ', category: 'habits', startTime: '06:00', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ì•„ì¹¨ ìŠ¤íŠ¸ë ˆì¹­ 10ë¶„', category: 'recovery', startTime: '06:10', endTime: '06:20', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ê±´ê°•í•œ ì•„ì¹¨ ì‹ì‚¬', category: 'nutrition', startTime: '07:00', endTime: '07:30', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ì•„ì¹¨ ì‚°ì±… 20ë¶„', category: 'exercise', startTime: '07:30', endTime: '07:50', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: '22:00 ì·¨ì¹¨', category: 'habits', startTime: '22:00', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] }
                ]
            },
            'vegan': {
                name: 'ë¹„ê±´ìœ¼ë¡œ ì‚´ì•„ë³´ê¸°',
                duration: 7,
                routines: [
                    { title: 'ì‹ë¬¼ì„± ì•„ì¹¨ ì‹ì‚¬', category: 'nutrition', startTime: '08:00', endTime: '08:30', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ì‹ë¬¼ì„± ì ì‹¬ ì‹ì‚¬', category: 'nutrition', startTime: '12:00', endTime: '12:30', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ì‹ë¬¼ì„± ì €ë… ì‹ì‚¬', category: 'nutrition', startTime: '19:00', endTime: '19:30', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ë¹„íƒ€ë¯¼ B12 ì˜ì–‘ì œ ì„­ì·¨', category: 'nutrition', startTime: '20:00', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] }
                ]
            },
            'digital-detox': {
                name: 'ë””ì§€í„¸ ë””í†¡ìŠ¤ ì‹¤ì²œí•˜ê¸°',
                duration: 3,
                routines: [
                    { title: '20:00 ì´í›„ ìŠ¤ë§ˆíŠ¸í° ë„ê¸°', category: 'habits', startTime: '20:00', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ë…ì„œ 30ë¶„', category: 'habits', startTime: '20:30', endTime: '21:00', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ì¼ê¸° ì“°ê¸°', category: 'habits', startTime: '21:30', endTime: '21:45', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] }
                ]
            },
            'daily-exercise': {
                name: 'ë§¤ì¼ ìš´ë™í•˜ëŠ” ì‚¬ëŒ ë˜ê¸°',
                duration: 14,
                routines: [
                    { title: 'ì•„ì¹¨ ëŸ¬ë‹ 30ë¶„', category: 'exercise', startTime: '06:00', endTime: '06:30', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ê·¼ë ¥ ìš´ë™ 20ë¶„', category: 'exercise', startTime: '18:00', endTime: '18:20', days: ['ì›”','ìˆ˜','ê¸ˆ'] },
                    { title: 'ì €ë… ìŠ¤íŠ¸ë ˆì¹­ 15ë¶„', category: 'recovery', startTime: '21:00', endTime: '21:15', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] }
                ]
            },
            'sleep': {
                name: 'ìˆ˜ë©´ ìµœì í™” í”„ë¡œì íŠ¸',
                duration: 7,
                routines: [
                    { title: '22:30 ì·¨ì¹¨ ì¤€ë¹„', category: 'recovery', startTime: '22:30', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ëª…ìƒ 10ë¶„', category: 'recovery', startTime: '22:00', endTime: '22:10', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ìŠ¤ë§ˆíŠ¸í° ë„ê¸°', category: 'habits', startTime: '22:15', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: '07:00 ê¸°ìƒ', category: 'habits', startTime: '07:00', endTime: '', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] },
                    { title: 'ì•„ì¹¨ í–‡ë¹› ì¬ê¸° 15ë¶„', category: 'recovery', startTime: '07:10', endTime: '07:25', days: ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'] }
                ]
            }
        };

        let currentOnboardingStep = 0;
        let currentExperimentId = '';
        let onboardingSteps = [];

        // í•„í„°ë§ í•¨ìˆ˜
        function filterCategory(category) {
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            event.target.classList.add('active');

            const cards = document.querySelectorAll('.experiment-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        // ì •ë ¬ í•¨ìˆ˜
        function sortBy(type) {
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            const experimentList = document.getElementById('experimentList');
            const cards = Array.from(document.querySelectorAll('.experiment-card:not(.hidden)'));
            
            cards.sort((a, b) => {
                if (type === 'popular') {
                    return parseInt(b.dataset.popularity) - parseInt(a.dataset.popularity);
                } else {
                    return parseInt(b.dataset.completion) - parseInt(a.dataset.completion);
                }
            });

            // ì¬ì •ë ¬
            cards.forEach(card => {
                experimentList.appendChild(card);
            });
        }

        // íƒ­ ì „í™˜
        const tabs = document.querySelectorAll('.tab-btn');
        const experimentList = document.getElementById('experimentList');

        function switchTab(index) {
            tabs.forEach(t => t.classList.remove('active'));
            tabs[index].classList.add('active');

            if (index === 1) {
                showInProgressExperiments();
            } else if (index === 2) {
                showCompletedExperiments();
            } else {
                location.reload();
            }
        }

        function showInProgressExperiments() {
            const activeExperiments = JSON.parse(localStorage.getItem('activeExperiments') || '[]');
            
            if (activeExperiments.length === 0) {
                experimentList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">âš—ï¸</div>
                        <div class="empty-text">
                            ì§„í–‰ì¤‘ì¸ ì‹¤í—˜ì´ ì—†ì–´ìš”<br>
                            ìƒˆë¡œìš´ ì‹¤í—˜ì„ ì‹œì‘í•´ë³´ì„¸ìš”!
                        </div>
                    </div>
                `;
                return;
            }

            experimentList.innerHTML = activeExperiments.map(exp => {
                const progress = Math.round((exp.currentDay / exp.duration) * 100);
                return `
                    <div class="experiment-card">
                        <div class="experiment-header">
                            <div class="experiment-icon">${getExperimentIcon(exp.id)}</div>
                            <div class="experiment-info">
                                <span class="experiment-category">${getExperimentCategory(exp.id)}</span>
                                <div class="experiment-title">${exp.name}</div>
                                <div class="experiment-duration">ì§„í–‰ ì¤‘: ${exp.currentDay}ì¼ì°¨/${exp.duration}ì¼</div>
                            </div>
                        </div>
                        
                        <div class="experiment-description">
                            ìˆœì¡°ë¡­ê²Œ ì§„í–‰ì¤‘ì´ì—ìš”! ì´ëŒ€ë¡œë§Œ í•˜ë©´ ì„±ê³µí•  ìˆ˜ ìˆì–´ìš” ğŸ’ª
                        </div>

                        <div style="background: #f5f5f5; border-radius: 8px; height: 8px; margin-bottom: 16px;">
                            <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); height: 100%; width: ${progress}%; border-radius: 8px;"></div>
                        </div>

                        <button class="experiment-btn secondary" onclick="window.location.href='routine.html'">ì§„í–‰ìƒí™© ë³´ê¸°</button>
                    </div>
                `;
            }).join('');
        }

        function showCompletedExperiments() {
            const completedExperiments = JSON.parse(localStorage.getItem('completedExperiments') || '[]');
            
            if (completedExperiments.length === 0) {
                experimentList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ†</div>
                        <div class="empty-text">
                            ì•„ì§ ì™„ë£Œí•œ ì‹¤í—˜ì´ ì—†ì–´ìš”<br>
                            ì²« ì‹¤í—˜ì„ ì‹œì‘í•´ë³´ì„¸ìš”!
                        </div>
                    </div>
                `;
                return;
            }

            experimentList.innerHTML = completedExperiments.map(exp => `
                <div class="experiment-card completed">
                    <div class="experiment-header">
                        <div class="experiment-icon">${getExperimentIcon(exp.id)}</div>
                        <div class="experiment-info">
                            <span class="experiment-category">${getExperimentCategory(exp.id)}</span>
                            <div class="experiment-title">${exp.name}</div>
                            <div class="experiment-duration">ì™„ë£Œ: ${exp.completedDate}</div>
                        </div>
                        <span class="success-badge">âœ“ ì„±ê³µ</span>
                    </div>
                    
                    <div class="experiment-description">
                        ì¶•í•˜í•´ìš”! ${exp.duration}ì¼ê°„ì˜ ì‹¤í—˜ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì³¤ì–´ìš” ğŸ‰
                    </div>

                    <div class="experiment-stats">
                        <div class="stat-item">âœ… 100% ì™„ë£Œ</div>
                        <div class="stat-item">ğŸ”¥ ${exp.duration}ì¼ ì—°ì†</div>
                    </div>

                    <button class="experiment-btn secondary">ê²°ê³¼ ë³´ê¸°</button>
                </div>
            `).join('');
        }

        function getExperimentIcon(id) {
            const icons = {
                'morning': 'ğŸŒ…',
                'vegan': 'ğŸŒ±',
                'digital-detox': 'ğŸ“µ',
                'daily-exercise': 'ğŸ’ª',
                'sleep': 'ğŸ§˜'
            };
            return icons[id] || 'âš—ï¸';
        }

        function getExperimentCategory(id) {
            const categories = {
                'morning': 'ìŠµê´€ ê°œì„ ',
                'vegan': 'ì˜ì–‘ì„­ì·¨',
                'digital-detox': 'ìŠµê´€ ê°œì„ ',
                'daily-exercise': 'ìš´ë™',
                'sleep': 'íšŒë³µ/ì»¨ë””ì…”ë‹'
            };
            return categories[id] || 'ê¸°íƒ€';
        }

        // ì‹¤í—˜ ì‹œì‘ - ì˜¨ë³´ë”© í‘œì‹œ
        function startExperiment(name, id) {
            currentExperimentId = id;
            onboardingSteps = onboardingData[id] || [];
            currentOnboardingStep = 0;
            
            if (onboardingSteps.length > 0) {
                updateOnboardingStep();
                document.getElementById('onboardingModal').classList.add('active');
            } else {
                addChallengeToRoutine();
            }
        }

        // ì˜¨ë³´ë”© ë‹¨ê³„ ì—…ë°ì´íŠ¸
        function updateOnboardingStep() {
            const step = onboardingSteps[currentOnboardingStep];
            const progress = ((currentOnboardingStep + 1) / onboardingSteps.length) * 100;
            
            document.getElementById('onboardingProgress').style.width = progress + '%';
            document.getElementById('onboardingStep').innerHTML = `
                <div class="onboarding-image">${step.icon}</div>
                <h2 class="onboarding-title">${step.title}</h2>
                <p class="onboarding-description">${step.description}</p>
            `;

            const actionBtn = document.querySelector('.onboarding-btn');
            if (currentOnboardingStep === onboardingSteps.length - 1) {
                actionBtn.textContent = 'ë‚´ ë£¨í‹´ì— ì±Œë¦°ì§€ ì¶”ê°€í•˜ê¸°';
                actionBtn.onclick = addChallengeToRoutine;
            } else {
                actionBtn.textContent = 'ë‹¤ìŒ';
                actionBtn.onclick = nextOnboardingStep;
            }
        }

        // ë‹¤ìŒ ì˜¨ë³´ë”© ë‹¨ê³„
        function nextOnboardingStep() {
            if (currentOnboardingStep < onboardingSteps.length - 1) {
                currentOnboardingStep++;
                updateOnboardingStep();
            }
        }

        // ì˜¨ë³´ë”© ê±´ë„ˆë›°ê¸°
        function skipOnboarding() {
            addChallengeToRoutine();
        }

        // ì˜¨ë³´ë”© ë‹«ê¸°
        function closeOnboarding() {
            document.getElementById('onboardingModal').classList.remove('active');
        }

        // ì±Œë¦°ì§€ë¥¼ ë£¨í‹´ì— ì¶”ê°€
        function addChallengeToRoutine() {
            closeOnboarding();
            
            const experiment = experimentRoutines[currentExperimentId];
            if (!experiment) {
                alert('ì‹¤í—˜ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            // ì‹¤í—˜ ë°ì´í„° ì €ì¥
            const activeExperiments = JSON.parse(localStorage.getItem('activeExperiments') || '[]');
            
            // ì´ë¯¸ ì§„í–‰ì¤‘ì¸ ì‹¤í—˜ì¸ì§€ í™•ì¸
            if (activeExperiments.some(exp => exp.id === currentExperimentId)) {
                alert('ì´ë¯¸ ì§„í–‰ì¤‘ì¸ ì‹¤í—˜ì…ë‹ˆë‹¤!');
                return;
            }
            
            // ìƒˆ ì‹¤í—˜ ì¶”ê°€
            activeExperiments.push({
                id: currentExperimentId,
                name: experiment.name,
                duration: experiment.duration,
                currentDay: 1,
                startDate: new Date().toISOString().split('T')[0]
            });
            localStorage.setItem('activeExperiments', JSON.stringify(activeExperiments));
            
            // ë£¨í‹´ ë°ì´í„° ì €ì¥
            const existingRoutines = JSON.parse(localStorage.getItem('experimentRoutines') || '[]');
            experiment.routines.forEach(routine => {
                existingRoutines.push({
                    ...routine,
                    experimentId: currentExperimentId,
                    experimentName: experiment.name,
                    isExperiment: true
                });
            });
            localStorage.setItem('experimentRoutines', JSON.stringify(existingRoutines));
            
            alert('ì±Œë¦°ì§€ê°€ ë£¨í‹´ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
            window.location.href = 'routine.html';
        }
    </script>
    <script src="tour-system.js"></script>
</body>
</html>